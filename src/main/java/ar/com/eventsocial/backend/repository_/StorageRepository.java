package ar.com.eventsocial.backend.repository_;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.springframework.web.multipart.MultipartFile;

import com.google.api.client.repackaged.org.apache.commons.codec.binary.Base64;
import com.google.auth.oauth2.GoogleCredentials;
import com.google.cloud.firestore.Firestore;
import com.google.cloud.storage.BlobId;
import com.google.cloud.storage.BlobInfo;
import com.google.cloud.storage.Storage;
import com.google.firebase.FirebaseApp;
import com.google.firebase.FirebaseOptions;

public class StorageRepository {

	private Storage storage;

	public void Connection() throws IOException {
		FileInputStream serviceAccount;
		try {
			serviceAccount = new FileInputStream("./ServiceAccountKey.json");

			FirebaseOptions options = new FirebaseOptions.Builder()
					.setCredentials(GoogleCredentials.fromStream(serviceAccount)).build();

			FirebaseApp.initializeApp(options);

			Firestore db = com.google.firebase.cloud.FirestoreClient.getFirestore();

			String imageName = "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";

			byte[] data = Base64.decodeBase64(imageName);

			Map<String, String> map = new HashMap<>();
			// map.put("firebaseStorageDownloadTokens", "imagen");
			BlobId blobId = BlobId.of("gs://eventuy-befe5.appspot.com", "TEST_");
			BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setMetadata(map).setContentType(".jpeg").build();
			storage.create(blobInfo, data);

			System.out.println("lala");
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		}
	}

}
